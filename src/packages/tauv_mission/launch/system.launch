<?xml version="1.0"?>
<launch>
  <!-- =======================  -->
  <!--        Arguments         -->
  <!-- =======================  -->

  <!-- Name of the robot model  -->
  <arg name="model_name" default="kingfisher"/>

  <!-- =======================  -->
  <!--       Load Configs       -->
  <!-- =======================  -->

  <!-- figure out path to vehicle configurations based on model name  -->
  <arg name="config_pkg" default="$(eval find(arg('model_name') + '_description'))"/>

  <!-- =======================  -->
  <!--  Launch Vehicle / Cams   -->
  <!-- =======================  -->
  <include file="$(find tauv_common)/launch/darknet_ros/darknet_ros.launch"/>
  <include file="$(find tauv_vehicle)/launch/zed/zedm_multi.launch"/>
  <include file="$(find tauv_vehicle)/launch/$(arg model_name)_vehicle.launch"/>

  <!-- =======================  -->
  <!-- Launch abstract systems  -->
  <!-- =======================  -->

  <!-- Launch the alarm server:  -->
  <node pkg="tauv_common" type="alarm_server" name="alarm_server" output="log"/>
  <node pkg="tauv_common" type="watchdogs" name="watchdogs"/>

  <!-- Launch the message printer -->
  <node pkg="tauv_common" type="message_printer" name="message_printer" output="log"/>

  <!-- Start the GNC system: -->
  <include file="$(find tauv_common)/launch/gnc/gnc.launch">
    <arg name="model_name" value="$(arg model_name)"/>
  </include>

  <!-- Start the vision system: -->
  <include file="$(find tauv_common)/launch/vision/log_detections.launch"/>
  <!-- Launch mission system -->
  <!-- <node pkg="tauv_mission" type="mission_manager" name="mission_manager" output="screen"/> -->
</launch>
