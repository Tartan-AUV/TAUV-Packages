<?xml version="1.0"?>
<launch>
  <!-- =======================  -->
  <!--        Arguments         -->
  <!-- =======================  -->

  <!-- Name of the robot model  -->
  <arg name="model_name" default="kingfisher"/>
  <arg name="namespace" default="kf"/>

  <arg name="teleop" default="true"/>

  <!-- =======================  -->
  <!--       Load Configs       -->
  <!-- =======================  -->

  <!-- figure out path to vehicle configurations based on model name  -->
  <arg name="config_pkg" default="$(eval find(arg('model_name') + '_description'))"/>

  <!-- =======================  -->
  <!--  Launch Vehicle / Cams   -->
  <!-- =======================  -->
<!--  <include file="$(find tauv_common)/launch/transform_manager/retare_sub_position.launch"/>-->
<!--  <include file="$(find tauv_common)/launch/darknet_ros/darknet_ros.launch"/>-->
  <group ns="$(arg namespace)">
    <param name="tf_namespace" value="$(arg namespace)" />

    <include file="$(find tauv_common)/launch/alarms/alarms.launch" />

    <include file="$(find tauv_vehicle)/launch/vehicles/$(arg model_name)_vehicle.launch"/>
    <include file="$(arg config_pkg)/launch/transforms.launch">
      <arg name="namespace" value="$(arg namespace)" />
    </include>

    <!-- =======================  -->
    <!-- Launch abstract systems  -->
    <!-- =======================  -->

    <!-- Launch the alarm server:  -->

    <!-- Launch the message printer -->
    <node pkg="tauv_common" type="message_printer" name="message_printer" output="log"/>

    <!-- Start the GNC system: -->
    <include file="$(find tauv_common)/launch/gnc/gnc.launch">
      <arg name="model_name" value="$(arg model_name)"/>
      <arg name="teleop" value="$(arg teleop)" />
    </include>

    <include file="$(find tauv_common)/launch/vision/vision.launch"/>

    <!-- Start the vision system: -->
    <!-- Launch mission system -->
<!--     <node pkg="tauv_mission" type="mission_manager" name="mission_manager" output="screen"/> -->
  </group>
</launch>
