<?xml version="1.0"?>
<robot xmlns:xacro="http://www.ros.org/wiki/xacro">
   <xacro:macro name="teledyne_dvl"
      params="namespace
              *origin">
      <joint name="${namespace}/teledyne_dvl_joint" type="continuous">
         <xacro:insert_block name="origin"/>
         <axis xyz="1 0 0"/>
         <parent link="${namespace}/base_link"/>
         <child link="${namespace}/teledyne_dvl"/>
      </joint>

      <link name="${namespace}/teledyne_dvl">
         <inertial>
            <mass value="0.001"/>
            <origin xyz="0 0 0" rpy="$0 {0.5*pi} 0"/>
            <inertia
                    ixx="0"
                    ixy="0"
                    ixz="0"
                    iyy="0"
                    iyz="0"
                    izz="0"
            />
         </inertial>
         <visual>
            <origin xyz="0 0 0" rpy="0 ${0.5*pi} 0"/>
            <geometry>
               <cylinder length="${0.000001}" radius="${0.000001}" />
            </geometry>
         </visual>
         <collision>
            <origin xyz="0 0 0" rpy="0 ${0.5*pi} 0"/>
            <geometry>
               <cylinder length="${0.000001}" radius="${0.000001}" />
            </geometry>
         </collision>
      </link>

      <gazebo>
         <plugin name="${namespace}_teledyne_dvl" filename="libtauv_teledyne_dvl_plugin.so">
            <linkName>${namespace}/teledyne_dvl</linkName>
            <jointName>${namespace}/teledyne_dvl_joint</jointName>
         </plugin>
      </gazebo>

      <gazebo reference="${namespace}/teledyne_dvl">
         <selfCollide>false</selfCollide>
      </gazebo>
   </xacro:macro>
</robot>
