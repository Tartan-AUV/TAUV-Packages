<!-- Phidgets IMU launch file -->

<launch>

  #### Nodelet manager ######################################################

<!--  <node pkg="nodelet" type="nodelet" name="imu_manager"-->
<!--    args="manager" output="screen"/>-->

  #### IMU Driver ###########################################################

<!--  <node pkg="nodelet" type="nodelet" name="PhidgetsImuNodelet"-->
<!--    args="load phidgets_imu/PhidgetsImuNodelet imu_manager"-->
<!--    output="screen">-->
  <node pkg="phidgets_imu" type="phidgets_imu" name="imu" output="screen">
    # supported data rates: 4 8 16 24 32 40 ... 1000 (in ms)
    <param name="period" value="4"/>
    <param name="frame_id" value="imu_link"/>
  </node>

# compass correction params (see http://www.phidgets.com/docs/1044_User_Guide)
    <!-- <param name="cc_mag_field" value="0.52859"/>
         <param name="cc_offset0" value="0.03921"/>
         <param name="cc_offset1" value="0.19441"/>
         <param name="cc_offset2" value="-0.03493"/>
         <param name="cc_gain0" value="1.81704"/>
         <param name="cc_gain1" value="1.81028"/>
         <param name="cc_gain2" value="2.04819"/>
         <param name="cc_t0" value="0.00142"/>
         <param name="cc_t1" value="-0.03591"/>
         <param name="cc_t2" value="0.00160 "/>
         <param name="cc_t3" value="-0.05038"/>
         <param name="cc_t4" value="-0.03942"/>
         <param name="cc_t5" value="-0.05673"/> -->
<!--  </node>-->

  #### IMU Orientation Filter ###############################################

<!--  <node pkg="nodelet" type="nodelet" name="ImuFilterNodelet"-->
<!--    args="load imu_filter_madgwick/ImuFilterNodelet imu_manager"-->
<!--    output="screen">-->
<!--    <param name="use_mag" value="false"/>-->
<!--    <param name="reverse_tf" value="false"/>-->
<!--    <param name="publish_tf" value="false"/>-->
<!--    <param name="fixed_frame" value="inertial_fixed"/>-->
<!--    <param name="world_frame" value="enu"/>-->
<!--  </node>-->

  <node pkg="imu_complementary_filter" type="complementary_filter_node" name="comp_imu" clear_params="true" output="screen">
    <param name="~use_mag" value="false"/>
    <param name="~publish_tf" value="false"/>
  </node>
<!--
  #### IMU Transformer ######################################################
  <node pkg="nodelet" type="nodelet" name="ImuTransformerNodelet"
    argNo, you can not Gimbal lock a sensor, as it is a physical object that you moved.

Gimbal lock refers to a state on where if you where to move 2 angles, they would have the same effect on the rotation. It is not an error, but an specific rotation state. But if you are personally moving the object by hand, Gimbal lock is impossible. Wikipedia has a brilliant gif:

ï¿¼

Gimbal locked airplane. When the pitch (green) and yaw (magenta) gimbals become aligned, changes to roll (blue) and yaw apply the same rotation to the airplane.

However, note that the cause of Gimbal lock may be the causes="load imu_transformer/imu_transformer_nodelet imu_manager"
    output="screen">
    <remap from="imu_in/data" to="imu/relative/data"/>
    <remap from="imu_in/mag" to="imu/relative/mag"/>
    <remap from="imu_out/data" to="imu/data"/>
    <remap from="imu_out/mag" to="imu/mag"/>
  </node>
  -->
</launch>
